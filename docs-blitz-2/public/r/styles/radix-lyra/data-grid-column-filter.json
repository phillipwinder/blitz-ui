{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"data-grid-column-filter","type":"registry:ui","title":"Data Grid Column Filter","description":"","dependencies":["@tanstack/react-table"],"registryDependencies":["https://reui.io/r/styles/radix-lyra/badge.json","button","input","popover","separator"],"files":[{"path":"data-grid-column-filter.tsx","type":"registry:ui","content":"\"use client\"\n\nimport { useMemo, useState } from \"react\"\nimport { Column } from \"@tanstack/react-table\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\"\nimport { Separator } from \"@/components/ui/separator\"\nimport { IconPlaceholder } from \"@/app/(create)/components/icon-placeholder\"\n\ninterface DataGridColumnFilterProps<TData, TValue> {\n  column?: Column<TData, TValue>\n  title?: string\n  options: {\n    label: string\n    value: string\n    icon?: React.ComponentType<{ className?: string }>\n  }[]\n}\n\nfunction DataGridColumnFilter<TData, TValue>({\n  column,\n  title,\n  options,\n}: DataGridColumnFilterProps<TData, TValue>) {\n  const facets = column?.getFacetedUniqueValues()\n  const selectedValues = new Set(column?.getFilterValue() as string[])\n  const [searchQuery, setSearchQuery] = useState(\"\")\n\n  const filteredOptions = useMemo(() => {\n    if (!searchQuery) return options\n    return options.filter((option) =>\n      option.label.toLowerCase().includes(searchQuery.toLowerCase())\n    )\n  }, [options, searchQuery])\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button variant=\"outline\" size=\"sm\">\n          <IconPlaceholder\n            lucide=\"CirclePlusIcon\"\n            tabler=\"IconCirclePlus\"\n            hugeicons=\"AddCircleIcon\"\n            phosphor=\"PlusCircleIcon\"\n            remixicon=\"RiAddCircleLine\"\n            className=\"size-4\"\n          />\n          {title}\n          {selectedValues?.size > 0 && (\n            <>\n              <Separator orientation=\"vertical\" className=\"mx-2 h-4\" />\n              <Badge\n                variant=\"secondary\"\n                className=\"rounded-sm px-1 font-normal lg:hidden\"\n              >\n                {selectedValues.size}\n              </Badge>\n              <div className=\"hidden space-x-1 lg:flex\">\n                {selectedValues.size > 2 ? (\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"rounded-sm px-1 font-normal\"\n                  >\n                    {selectedValues.size} selected\n                  </Badge>\n                ) : (\n                  options\n                    .filter((option) => selectedValues.has(option.value))\n                    .map((option) => (\n                      <Badge\n                        variant=\"secondary\"\n                        key={option.value}\n                        className=\"rounded-sm px-1 font-normal\"\n                      >\n                        {option.label}\n                      </Badge>\n                    ))\n                )}\n              </div>\n            </>\n          )}\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[200px] p-0\" align=\"start\">\n        <div className=\"p-2\">\n          <Input\n            placeholder={title}\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"h-8\"\n          />\n        </div>\n        <div className=\"max-h-[300px] overflow-y-auto\">\n          {filteredOptions.length === 0 ? (\n            <div className=\"text-muted-foreground py-6 text-center text-sm\">\n              No results found.\n            </div>\n          ) : (\n            <div className=\"p-1\">\n              {filteredOptions.map((option) => {\n                const isSelected = selectedValues.has(option.value)\n                return (\n                  <div\n                    key={option.value}\n                    onClick={() => {\n                      if (isSelected) {\n                        selectedValues.delete(option.value)\n                      } else {\n                        selectedValues.add(option.value)\n                      }\n                      const filterValues = Array.from(selectedValues)\n                      column?.setFilterValue(\n                        filterValues.length ? filterValues : undefined\n                      )\n                    }}\n                    className={cn(\n                      \"relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none\",\n                      \"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground\"\n                    )}\n                  >\n                    <div\n                      className={cn(\n                        \"border-primary me-2 flex h-4 w-4 items-center justify-center rounded-sm border\",\n                        isSelected\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"opacity-50 [&_svg]:invisible\"\n                      )}\n                    >\n                      <IconPlaceholder\n                        lucide=\"CheckIcon\"\n                        tabler=\"IconCheck\"\n                        hugeicons=\"Tick02Icon\"\n                        phosphor=\"CheckIcon\"\n                        remixicon=\"RiCheckLine\"\n                        className=\"size-4\"\n                      />\n                    </div>\n                    {option.icon && (\n                      <option.icon className=\"text-muted-foreground mr-2 h-4 w-4\" />\n                    )}\n                    <span>{option.label}</span>\n                    {facets?.get(option.value) && (\n                      <span className=\"ms-auto flex h-4 w-4 items-center justify-center font-mono text-xs\">\n                        {facets.get(option.value)}\n                      </span>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n          )}\n          {selectedValues.size > 0 && (\n            <>\n              <div className=\"bg-border -mx-1 my-1 h-px\" />\n              <div className=\"p-1\">\n                <div\n                  onClick={() => column?.setFilterValue(undefined)}\n                  className=\"hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center justify-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none\"\n                >\n                  Clear filters\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\nexport { DataGridColumnFilter, type DataGridColumnFilterProps }","target":"component/reui/data-grid/data-grid-column-filter.tsx"}]}