{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-carousel-9","type":"registry:block","title":"Carousel with thumbnail navigation","description":"Carousel with thumbnail navigation","dependencies":[],"registryDependencies":["carousel"],"files":[{"path":"p-carousel-9.tsx","type":"registry:block","content":"\"use client\"\n\nimport { useCallback, useEffect, useState } from \"react\"\nimport Image from \"next/image\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  type CarouselApi,\n} from \"@/components/ui/carousel\"\n\nconst ITEMS_COUNT = 10\n\nexport function Pattern() {\n  const [mainApi, setMainApi] = useState<CarouselApi>()\n  const [thumbApi, setThumbApi] = useState<CarouselApi>()\n  const [selectedIndex, setSelectedIndex] = useState(0)\n\n  const onThumbClick = useCallback(\n    (index: number) => {\n      if (!mainApi || !thumbApi) return\n      mainApi.scrollTo(index)\n    },\n    [mainApi, thumbApi]\n  )\n\n  const onSelect = useCallback(() => {\n    if (!mainApi || !thumbApi) return\n    const index = mainApi.selectedScrollSnap()\n    setSelectedIndex(index)\n    thumbApi.scrollTo(index)\n  }, [mainApi, thumbApi])\n\n  useEffect(() => {\n    if (!mainApi) return\n    onSelect()\n    mainApi.on(\"select\", onSelect)\n    mainApi.on(\"reInit\", onSelect)\n    return () => {\n      mainApi.off(\"select\", onSelect)\n      mainApi.off(\"reInit\", onSelect)\n    }\n  }, [mainApi, onSelect])\n\n  return (\n    <div className=\"flex w-full max-w-md flex-col gap-3 p-4\">\n      <Carousel setApi={setMainApi} className=\"w-full\">\n        <CarouselContent>\n          {Array.from({ length: ITEMS_COUNT }).map((_, index) => (\n            <CarouselItem key={index}>\n              <div className=\"bg-muted rounded-4xl relative aspect-video overflow-hidden\">\n                <Image\n                  src={`https://picsum.photos/1000/800?grayscale&random=${index + 20}`}\n                  alt={`Slide ${index + 1}`}\n                  fill\n                  className=\"object-cover\"\n                  priority={index === 0}\n                />\n              </div>\n            </CarouselItem>\n          ))}\n        </CarouselContent>\n      </Carousel>\n\n      <Carousel\n        setApi={setThumbApi}\n        opts={{\n          containScroll: \"keepSnaps\",\n          dragFree: true,\n        }}\n        className=\"w-full\"\n      >\n        <CarouselContent className=\"-ml-2 flex-row\">\n          {Array.from({ length: ITEMS_COUNT }).map((_, index) => (\n            <CarouselItem\n              key={index}\n              className=\"basis-1/5 cursor-pointer pl-2 sm:basis-1/6\"\n              onClick={() => onThumbClick(index)}\n            >\n              <div\n                className={cn(\n                  \"rounded-4xl relative aspect-square overflow-hidden border-2 transition-all\",\n                  index === selectedIndex\n                    ? \"border-primary opacity-100\"\n                    : \"border-transparent opacity-40 hover:opacity-70\"\n                )}\n              >\n                <Image\n                  src={`https://picsum.photos/400/400?grayscale&random=${index + 20}`}\n                  alt={`Thumb ${index + 1}`}\n                  fill\n                  className=\"object-cover\"\n                />\n              </div>\n            </CarouselItem>\n          ))}\n        </CarouselContent>\n      </Carousel>\n    </div>\n  )\n}","target":"components/patterns/p-carousel-9.tsx"}]}