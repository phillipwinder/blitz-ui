{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-filters-7","type":"registry:block","title":"Filters with data grid","description":"Filters with data grid","dependencies":["@tanstack/react-table"],"registryDependencies":["https://reui.io/r/styles/base-maia/alert.json","avatar","https://reui.io/r/styles/base-maia/badge.json","button","https://reui.io/r/styles/base-maia/data-grid.json","https://reui.io/r/styles/base-maia/filters.json","scroll-area","skeleton"],"files":[{"path":"p-filters-7.tsx","type":"registry:block","content":"\"use client\"\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\"\nimport { Alert, AlertTitle } from \"@/components/reui/alert\"\nimport { Badge } from \"@/components/reui/badge\"\nimport {\n  DataGrid,\n  DataGridContainer,\n} from \"@/components/reui/data-grid/data-grid\"\nimport { DataGridColumnHeader } from \"@/components/reui/data-grid/data-grid-column-header\"\nimport { DataGridPagination } from \"@/components/reui/data-grid/data-grid-pagination\"\nimport { DataGridTable } from \"@/components/reui/data-grid/data-grid-table\"\nimport {\n  createFilter,\n  Filters,\n  type Filter,\n  type FilterFieldConfig,\n} from \"@/components/reui/filters\"\nimport {\n  ColumnDef,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  PaginationState,\n  SortingState,\n  useReactTable,\n} from \"@tanstack/react-table\"\n\nimport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n} from \"@/components/ui/avatar\"\nimport { Button } from \"@/components/ui/button\"\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { IconPlaceholder } from \"@/app/(create)/components/icon-placeholder\"\n\ninterface IData {\n  id: string\n  name: string\n  availability: \"online\" | \"away\" | \"busy\" | \"offline\"\n  avatar: string\n  status: \"active\" | \"inactive\"\n  flag: string // Emoji flags\n  email: string\n  company: string\n  role: string\n  joined: string\n  location: string\n  balance: number\n}\n\nconst demoData: IData[] = [\n  {\n    id: \"1\",\n    name: \"Alex Johnson\",\n    availability: \"online\",\n    avatar:\n      \"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"us\",\n    email: \"alex@apple.com\",\n    company: \"Apple\",\n    role: \"CEO\",\n    joined: \"Jan, 2024\",\n    location: \"San Francisco, USA\",\n    balance: 5143.03,\n  },\n  {\n    id: \"2\",\n    name: \"Sarah Chen\",\n    availability: \"away\",\n    avatar:\n      \"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=96&h=96&dpr=2&q=80\",\n    status: \"inactive\",\n    flag: \"gb\",\n    email: \"sarah@openai.com\",\n    company: \"OpenAI\",\n    role: \"CTO\",\n    joined: \"Mar, 2023\",\n    location: \"London, UK\",\n    balance: 4321.87,\n  },\n  {\n    id: \"3\",\n    name: \"Michael Rodriguez\",\n    availability: \"busy\",\n    avatar:\n      \"https://images.unsplash.com/photo-1584308972272-9e4e7685e80f?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"ca\",\n    email: \"michael@meta.com\",\n    company: \"Meta\",\n    role: \"Designer\",\n    joined: \"Jun, 2022\",\n    location: \"Toronto, Canada\",\n    balance: 7654.98,\n  },\n  {\n    id: \"4\",\n    name: \"Emma Wilson\",\n    availability: \"offline\",\n    avatar:\n      \"https://images.unsplash.com/photo-1485893086445-ed75865251e0?w=96&h=96&dpr=2&q=80\",\n    status: \"inactive\",\n    flag: \"au\",\n    email: \"emma@tesla.com\",\n    company: \"Tesla\",\n    role: \"Developer\",\n    joined: \"Sep, 2024\",\n    location: \"Sydney, Australia\",\n    balance: 3456.45,\n  },\n  {\n    id: \"5\",\n    name: \"David Kim\",\n    availability: \"online\",\n    avatar:\n      \"https://images.unsplash.com/photo-1607990281513-2c110a25bd8c?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"de\",\n    email: \"david@sap.com\",\n    company: \"SAP\",\n    role: \"Lawyer\",\n    joined: \"Nov, 2023\",\n    location: \"Berlin, Germany\",\n    balance: 9876.54,\n  },\n  {\n    id: \"6\",\n    name: \"Aron Thompson\",\n    availability: \"away\",\n    avatar:\n      \"https://images.unsplash.com/photo-1527980965255-d3b416303d12?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"my\",\n    email: \"aron@keenthemes.com\",\n    company: \"Keenthemes\",\n    role: \"Director\",\n    joined: \"Feb, 2022\",\n    location: \"Kuala Lumpur, MY\",\n    balance: 6214.22,\n  },\n  {\n    id: \"7\",\n    name: \"James Brown\",\n    availability: \"busy\",\n    avatar:\n      \"https://images.unsplash.com/photo-1543299750-19d1d6297053?w=96&h=96&dpr=2&q=80\",\n    status: \"inactive\",\n    flag: \"es\",\n    email: \"james@bbva.es\",\n    company: \"BBVA\",\n    role: \"Product Manager\",\n    joined: \"Aug, 2024\",\n    location: \"Barcelona, Spain\",\n    balance: 5321.77,\n  },\n  {\n    id: \"8\",\n    name: \"Maria Garcia\",\n    availability: \"offline\",\n    avatar:\n      \"https://images.unsplash.com/photo-1620075225255-8c2051b6c015?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"jp\",\n    email: \"maria@sony.jp\",\n    company: \"Sony\",\n    role: \"Marketing Lead\",\n    joined: \"Dec, 2023\",\n    location: \"Tokyo, Japan\",\n    balance: 8452.39,\n  },\n  {\n    id: \"9\",\n    name: \"Nick Johnson\",\n    availability: \"online\",\n    avatar:\n      \"https://images.unsplash.com/photo-1485206412256-701ccc5b93ca?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"fr\",\n    email: \"nick@lvmh.fr\",\n    company: \"LVMH\",\n    role: \"Data Scientist\",\n    joined: \"Apr, 2022\",\n    location: \"Paris, France\",\n    balance: 7345.1,\n  },\n  {\n    id: \"10\",\n    name: \"Liam Thompson\",\n    availability: \"away\",\n    avatar:\n      \"https://images.unsplash.com/photo-1542595913-85d69b0edbaf?w=96&h=96&dpr=2&q=80\",\n    status: \"inactive\",\n    flag: \"it\",\n    email: \"liam@eni.it\",\n    company: \"ENI\",\n    role: \"Engineer\",\n    joined: \"Jul, 2024\",\n    location: \"Milan, Italy\",\n    balance: 5214.88,\n  },\n  {\n    id: \"11\",\n    name: \"Alex Johnson\",\n    availability: \"busy\",\n    avatar:\n      \"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"br\",\n    email: \"alex@vale.br\",\n    company: \"Vale\",\n    role: \"Software Engineer\",\n    joined: \"May, 2023\",\n    location: \"Rio de Janeiro, Brazil\",\n    balance: 9421.5,\n  },\n  {\n    id: \"12\",\n    name: \"Sarah Chen\",\n    availability: \"offline\",\n    avatar:\n      \"https://images.unsplash.com/photo-1519699047748-de8e457a634e?w=96&h=96&dpr=2&q=80\",\n    status: \"active\",\n    flag: \"in\",\n    email: \"sarah@tata.in\",\n    company: \"Tata\",\n    role: \"Sales Manager\",\n    joined: \"Oct, 2024\",\n    location: \"Mumbai, India\",\n    balance: 4521.67,\n  },\n]\n\n// Availability status component\nconst AvailabilityStatus = ({ availability }: { availability: string }) => {\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"online\":\n        return \"bg-green-500\"\n      case \"away\":\n        return \"bg-yellow-500\"\n      case \"busy\":\n        return \"bg-red-500\"\n      case \"offline\":\n        return \"bg-gray-400\"\n      default:\n        return \"bg-gray-400\"\n    }\n  }\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"online\":\n        return \"Online\"\n      case \"away\":\n        return \"Away\"\n      case \"busy\":\n        return \"Busy\"\n      case \"offline\":\n        return \"Offline\"\n      default:\n        return \"Unknown\"\n    }\n  }\n\n  return (\n    <div className=\"flex items-center gap-1.5\">\n      <div className={`size-2 rounded-full ${getStatusColor(availability)}`} />\n      <span className=\"text-muted-foreground text-sm\">\n        {getStatusLabel(availability)}\n      </span>\n    </div>\n  )\n}\n\n// Helper to check if a filter has meaningful values\nconst getActiveFilters = (filters: Filter[]) => {\n  return filters.filter((filter) => {\n    const { values } = filter\n\n    // Check if filter has meaningful values\n    if (!values || values.length === 0) return false\n\n    // For text/string values, check if they're not empty strings\n    if (\n      values.every((value) => typeof value === \"string\" && value.trim() === \"\")\n    )\n      return false\n\n    // For number values, check if they're not null/undefined\n    if (values.every((value) => value === null || value === undefined))\n      return false\n\n    // For arrays, check if they're not empty\n    if (values.every((value) => Array.isArray(value) && value.length === 0))\n      return false\n\n    return true\n  })\n}\n\nexport function Pattern() {\n  const [pagination, setPagination] = useState<PaginationState>({\n    pageIndex: 0,\n    pageSize: 5,\n  })\n  const [sorting, setSorting] = useState<SortingState>([\n    { id: \"name\", desc: false },\n  ])\n  const [filters, setFilters] = useState<Filter[]>([\n    createFilter(\"status\", \"is\", [\"active\"]),\n  ])\n\n  // Async state management\n  const [isLoading, setIsLoading] = useState(false)\n  const [filteredData, setFilteredData] = useState<IData[]>(demoData)\n  const isInitialLoad = useRef(true)\n\n  // Filter field configurations\n  const fields: FilterFieldConfig[] = [\n    {\n      key: \"name\",\n      label: \"Name\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"UserIcon\"\n          tabler=\"IconUser\"\n          hugeicons=\"UserIcon\"\n          phosphor=\"UserIcon\"\n          remixicon=\"RiUserLine\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"text\",\n      className: \"w-40\",\n      placeholder: \"Search names...\",\n    },\n    {\n      key: \"email\",\n      label: \"Email\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"MailIcon\"\n          tabler=\"IconMail\"\n          hugeicons=\"MailIcon\"\n          phosphor=\"EnvelopeIcon\"\n          remixicon=\"RiMailLine\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"text\",\n      className: \"w-48\",\n      placeholder: \"user@example.com\",\n    },\n    {\n      key: \"company\",\n      label: \"Company\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"BuildingIcon\"\n          tabler=\"IconBuilding\"\n          hugeicons=\"Building02Icon\"\n          phosphor=\"BuildingIcon\"\n          remixicon=\"RiBuilding4Line\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"select\",\n      searchable: true,\n      className: \"w-[180px]\",\n      options: [\n        { value: \"Apple\", label: \"Apple\" },\n        { value: \"OpenAI\", label: \"OpenAI\" },\n        { value: \"Meta\", label: \"Meta\" },\n        { value: \"Tesla\", label: \"Tesla\" },\n        { value: \"SAP\", label: \"SAP\" },\n        { value: \"Keenthemes\", label: \"Keenthemes\" },\n        { value: \"BBVA\", label: \"BBVA\" },\n        { value: \"Sony\", label: \"Sony\" },\n        { value: \"LVMH\", label: \"LVMH\" },\n        { value: \"ENI\", label: \"ENI\" },\n        { value: \"Vale\", label: \"Vale\" },\n        { value: \"Tata\", label: \"Tata\" },\n      ],\n    },\n    {\n      key: \"role\",\n      label: \"Role\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"UserIcon\"\n          tabler=\"IconUser\"\n          hugeicons=\"UserIcon\"\n          phosphor=\"UserIcon\"\n          remixicon=\"RiUserLine\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"select\",\n      searchable: true,\n      className: \"w-[160px]\",\n      options: [\n        { value: \"CEO\", label: \"CEO\" },\n        { value: \"CTO\", label: \"CTO\" },\n        { value: \"Designer\", label: \"Designer\" },\n        { value: \"Developer\", label: \"Developer\" },\n        { value: \"Lawyer\", label: \"Lawyer\" },\n        { value: \"Director\", label: \"Director\" },\n        { value: \"Product Manager\", label: \"Product Manager\" },\n        { value: \"Marketing Lead\", label: \"Marketing Lead\" },\n        { value: \"Data Scientist\", label: \"Data Scientist\" },\n        { value: \"Engineer\", label: \"Engineer\" },\n        { value: \"Software Engineer\", label: \"Software Engineer\" },\n        { value: \"Sales Manager\", label: \"Sales Manager\" },\n      ],\n    },\n    {\n      key: \"status\",\n      label: \"Status\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"UserIcon\"\n          tabler=\"IconUser\"\n          hugeicons=\"UserIcon\"\n          phosphor=\"UserIcon\"\n          remixicon=\"RiUserLine\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"select\",\n      searchable: false,\n      className: \"w-[140px]\",\n      options: [\n        {\n          value: \"active\",\n          label: \"Active\",\n          icon: <div className=\"size-2 rounded-full bg-green-500\"></div>,\n        },\n        {\n          value: \"inactive\",\n          label: \"Inactive\",\n          icon: <div className=\"bg-destructive size-2 rounded-full\"></div>,\n        },\n        {\n          value: \"archived\",\n          label: \"Archived\",\n          icon: <div className=\"size-2 rounded-full bg-zinc-400\"></div>,\n        },\n      ],\n    },\n    {\n      key: \"availability\",\n      label: \"Availability\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"UserIcon\"\n          tabler=\"IconUser\"\n          hugeicons=\"UserIcon\"\n          phosphor=\"UserIcon\"\n          remixicon=\"RiUserLine\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"select\",\n      searchable: false,\n      className: \"w-[160px]\",\n      options: [\n        {\n          value: \"online\",\n          label: \"Online\",\n          icon: (\n            <div className=\"flex items-center gap-2\">\n              <div className=\"size-2 rounded-full bg-green-500\" />\n              <span>Online</span>\n            </div>\n          ),\n        },\n        {\n          value: \"away\",\n          label: \"Away\",\n          icon: (\n            <div className=\"flex items-center gap-2\">\n              <div className=\"size-2 rounded-full bg-yellow-500\" />\n              <span>Away</span>\n            </div>\n          ),\n        },\n        {\n          value: \"busy\",\n          label: \"Busy\",\n          icon: (\n            <div className=\"flex items-center gap-2\">\n              <div className=\"size-2 rounded-full bg-red-500\" />\n              <span>Busy</span>\n            </div>\n          ),\n        },\n        {\n          value: \"offline\",\n          label: \"Offline\",\n          icon: (\n            <div className=\"flex items-center gap-2\">\n              <div className=\"size-2 rounded-full bg-gray-400\" />\n              <span>Offline</span>\n            </div>\n          ),\n        },\n      ],\n    },\n    {\n      key: \"location\",\n      label: \"Location\",\n      icon: (\n        <IconPlaceholder\n          lucide=\"MapPinIcon\"\n          tabler=\"IconMapPin\"\n          hugeicons=\"Location06Icon\"\n          phosphor=\"MapPinIcon\"\n          remixicon=\"RiMapPinLine\"\n          className=\"size-3.5\"\n        />\n      ),\n      type: \"text\",\n      className: \"w-40\",\n      placeholder: \"Search locations...\",\n    },\n  ]\n\n  // Apply filters to data (shared function)\n  const applyFiltersToData = useCallback((newFilters: Filter[]) => {\n    let filtered = [...demoData]\n\n    // Filter out empty filters before applying\n    const activeFilters = getActiveFilters(newFilters)\n\n    activeFilters.forEach((filter) => {\n      const { field, operator, values } = filter\n\n      filtered = filtered.filter((item) => {\n        const fieldValue = item[field as keyof IData]\n\n        switch (operator) {\n          case \"is\":\n            return values.includes(fieldValue)\n          case \"is_not\":\n            return !values.includes(fieldValue)\n          case \"contains\":\n            return values.some((value) =>\n              String(fieldValue)\n                .toLowerCase()\n                .includes(String(value).toLowerCase())\n            )\n          case \"not_contains\":\n            return !values.some((value) =>\n              String(fieldValue)\n                .toLowerCase()\n                .includes(String(value).toLowerCase())\n            )\n          case \"equals\":\n            return fieldValue === values[0]\n          case \"not_equals\":\n            return fieldValue !== values[0]\n          case \"greater_than\":\n            return Number(fieldValue) > Number(values[0])\n          case \"less_than\":\n            return Number(fieldValue) < Number(values[0])\n          case \"greater_than_or_equal\":\n            return Number(fieldValue) >= Number(values[0])\n          case \"less_than_or_equal\":\n            return Number(fieldValue) <= Number(values[0])\n          case \"between\":\n            if (values.length >= 2) {\n              const min = Number(values[0])\n              const max = Number(values[1])\n              return Number(fieldValue) >= min && Number(fieldValue) <= max\n            }\n            return true\n          case \"not_between\":\n            if (values.length >= 2) {\n              const min = Number(values[0])\n              const max = Number(values[1])\n              return Number(fieldValue) < min || Number(fieldValue) > max\n            }\n            return true\n          case \"before\":\n            return new Date(String(fieldValue)) < new Date(String(values[0]))\n          case \"after\":\n            return new Date(String(fieldValue)) > new Date(String(values[0]))\n          default:\n            return true\n        }\n      })\n    })\n\n    return filtered\n  }, [])\n\n  // Simulate async data filtering\n  const simulateAsyncFiltering = useCallback(\n    async (newFilters: Filter[]) => {\n      setIsLoading(true) // Show loading on current data\n\n      // Simulate API call delay\n      await new Promise((resolve) =>\n        setTimeout(resolve, 800 + Math.random() * 1200)\n      )\n\n      // Apply filters and update data after timeout\n      const filtered = applyFiltersToData(newFilters)\n      setFilteredData(filtered)\n      setIsLoading(false)\n    },\n    [applyFiltersToData]\n  )\n\n  const handleFiltersChange = useCallback(\n    (newFilters: Filter[]) => {\n      const oldActive = getActiveFilters(filters)\n      const newActive = getActiveFilters(newFilters)\n\n      setFilters(newFilters)\n\n      // Compare active filters to decide if we need to trigger async search\n      // Use stringify for simple deep comparison of filter objects\n      if (JSON.stringify(oldActive) === JSON.stringify(newActive)) {\n        return\n      }\n\n      // Reset pagination when filters change\n      setPagination((prev) => ({ ...prev, pageIndex: 0 }))\n      // Trigger async filtering\n      simulateAsyncFiltering(newFilters)\n    },\n    [filters, simulateAsyncFiltering]\n  )\n\n  // Initial data load - only run once on mount\n  useEffect(() => {\n    if (isInitialLoad.current) {\n      // Apply initial filter without loading state\n      const initialFiltered = applyFiltersToData(filters)\n      setFilteredData(initialFiltered)\n      isInitialLoad.current = false\n    }\n  }, [filters, applyFiltersToData])\n\n  const columns = useMemo<ColumnDef<IData>[]>(\n    () => [\n      {\n        accessorKey: \"name\",\n        id: \"name\",\n        header: ({ column }) => (\n          <DataGridColumnHeader title=\"Staff\" column={column} />\n        ),\n        cell: ({ row }) => {\n          return (\n            <div className=\"flex items-center gap-3\">\n              <Avatar className=\"size-8\">\n                <AvatarImage\n                  src={row.original.avatar}\n                  alt={row.original.name}\n                />\n                <AvatarFallback>\n                  {row.original.name\n                    .split(\" \")\n                    .map((n) => n[0])\n                    .join(\"\")}\n                </AvatarFallback>\n              </Avatar>\n              <div className=\"space-y-px\">\n                <div className=\"text-foreground font-medium\">\n                  {row.original.name}\n                </div>\n                <div className=\"text-muted-foreground truncate text-xs\">\n                  {row.original.email}\n                </div>\n              </div>\n            </div>\n          )\n        },\n        size: 200,\n        enableSorting: true,\n        enableHiding: false,\n        meta: {\n          skeleton: (\n            <div className=\"flex items-center gap-3\">\n              <Skeleton className=\"size-8 rounded-full\" />\n              <div className=\"space-y-1\">\n                <Skeleton className=\"h-4 w-24\" />\n                <Skeleton className=\"h-4 w-16\" />\n              </div>\n            </div>\n          ),\n        },\n      },\n      {\n        accessorKey: \"company\",\n        id: \"company\",\n        header: ({ column }) => (\n          <DataGridColumnHeader title=\"Company\" column={column} />\n        ),\n        cell: (info) => <span>{info.getValue() as string}</span>,\n        size: 150,\n        enableSorting: true,\n        enableHiding: false,\n        meta: {\n          skeleton: <Skeleton className=\"h-4 w-20\" />,\n        },\n      },\n      {\n        accessorKey: \"role\",\n        id: \"role\",\n        header: ({ column }) => (\n          <DataGridColumnHeader title=\"Occupation\" column={column} />\n        ),\n        cell: (info) => <span>{info.getValue() as string}</span>,\n        size: 125,\n        enableSorting: true,\n        enableHiding: false,\n        meta: {\n          skeleton: <Skeleton className=\"h-4 w-16\" />,\n        },\n      },\n      {\n        accessorKey: \"status\",\n        id: \"status\",\n        header: \"Status\",\n        cell: ({ row }) => {\n          const status = row.original.status\n\n          if (status == \"active\") {\n            return <Badge variant=\"success-outline\">Active</Badge>\n          } else if (status == \"inactive\") {\n            return <Badge variant=\"destructive-outline\">Inactive</Badge>\n          } else if (status == \"archived\") {\n            return <Badge variant=\"warning-outline\">Archived</Badge>\n          }\n        },\n        size: 100,\n        meta: {\n          skeleton: <Skeleton className=\"h-4 w-16 rounded-full\" />,\n        },\n      },\n      {\n        accessorKey: \"availability\",\n        id: \"availability\",\n        header: \"Availability\",\n        cell: ({ row }) => (\n          <AvailabilityStatus availability={row.original.availability} />\n        ),\n        size: 120,\n        enableSorting: true,\n        meta: {\n          skeleton: (\n            <div className=\"flex items-center gap-1.5\">\n              <Skeleton className=\"size-4 rounded-full\" />\n              <Skeleton className=\"h-3.5 w-12\" />\n            </div>\n          ),\n        },\n      },\n      {\n        accessorKey: \"location\",\n        id: \"location\",\n        header: ({ column }) => (\n          <DataGridColumnHeader title=\"Location\" column={column} />\n        ),\n        cell: ({ row }) => (\n          <div className=\"flex items-center gap-2\">\n            <img\n              src={`https://flagcdn.com/${row.original.flag.toLowerCase()}.svg`}\n              alt={row.original.flag}\n              className=\"size-4 rounded-full object-cover\"\n            />\n            <span>{row.original.location}</span>\n          </div>\n        ),\n        size: 180,\n        enableSorting: true,\n        meta: {\n          skeleton: (\n            <div className=\"flex items-center gap-2\">\n              <Skeleton className=\"size-4 rounded\" />\n              <Skeleton className=\"h-3.5 w-24\" />\n            </div>\n          ),\n        },\n      },\n      {\n        accessorKey: \"balance\",\n        id: \"balance\",\n        header: ({ column }) => (\n          <DataGridColumnHeader title=\"Balance\" column={column} />\n        ),\n        cell: ({ row }) => (\n          <span className=\"font-medium\">\n            ${row.original.balance.toLocaleString()}\n          </span>\n        ),\n        size: 120,\n        enableSorting: true,\n        meta: {\n          skeleton: <Skeleton className=\"h-4 w-16\" />,\n        },\n      },\n    ],\n    []\n  )\n\n  const [columnOrder, setColumnOrder] = useState<string[]>(\n    columns.map((column) => column.id as string)\n  )\n\n  const table = useReactTable({\n    columns,\n    data: filteredData,\n    pageCount: Math.ceil((filteredData?.length || 0) / pagination.pageSize),\n    getRowId: (row: IData) => row.id,\n    state: {\n      pagination,\n      sorting,\n      columnOrder,\n    },\n    onColumnOrderChange: setColumnOrder,\n    onPaginationChange: setPagination,\n    onSortingChange: setSorting,\n    getCoreRowModel: getCoreRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n  })\n\n  return (\n    <div className=\"w-full self-start\">\n      {/* Filters Section */}\n      <div className=\"mb-3.5 flex items-start gap-2.5\">\n        <div className=\"flex-1\">\n          <Filters\n            filters={filters}\n            fields={fields}\n            onChange={handleFiltersChange}\n            size=\"sm\"\n            trigger={\n              <Button variant=\"outline\" size=\"icon-sm\">\n                <IconPlaceholder\n                  lucide=\"ListFilterIcon\"\n                  tabler=\"IconFilter2\"\n                  hugeicons=\"FilterMailIcon\"\n                  phosphor=\"FunnelSimpleIcon\"\n                  remixicon=\"RiFilter3Line\"\n                />\n              </Button>\n            }\n          />\n        </div>\n        {filters.length > 0 && (\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => {\n              setFilters([])\n              simulateAsyncFiltering([])\n            }}\n            disabled={isLoading}\n          >\n            <IconPlaceholder\n              lucide=\"FunnelXIcon\"\n              tabler=\"IconFilterX\"\n              hugeicons=\"FilterRemoveIcon\"\n              phosphor=\"FunnelXIcon\"\n              remixicon=\"RiFilterOffLine\"\n            />\n            Clear\n          </Button>\n        )}\n      </div>\n\n      {/* Data Grid */}\n      <DataGrid\n        table={table}\n        isLoading={isLoading}\n        loadingMode=\"skeleton\"\n        recordCount={filteredData?.length || 0}\n        tableLayout={{\n          dense: true,\n          columnsMovable: true,\n        }}\n      >\n        <div className=\"w-full space-y-2.5\">\n          <DataGridContainer>\n            <ScrollArea>\n              <DataGridTable />\n              <ScrollBar orientation=\"horizontal\" />\n            </ScrollArea>\n          </DataGridContainer>\n          <DataGridPagination />\n        </div>\n      </DataGrid>\n\n      {/* Async Info Alert */}\n      <Alert variant=\"success\" className=\"mt-5\">\n        <IconPlaceholder\n          lucide=\"CircleAlertIcon\"\n          tabler=\"IconAlertCircle\"\n          hugeicons=\"AlertCircleIcon\"\n          phosphor=\"WarningCircleIcon\"\n          remixicon=\"RiErrorWarningLine\"\n        />\n        <AlertTitle>\n          Async Mode: Simulated API Delay of <strong>800-2000ms</strong>\n        </AlertTitle>\n      </Alert>\n    </div>\n  )\n}","target":"components/patterns/p-filters-7.tsx"}]}