{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-sonner-10","type":"registry:block","title":"Toast with upload progress simulation","description":"Toast with upload progress simulation","dependencies":["sonner"],"registryDependencies":["button","progress"],"files":[{"path":"p-sonner-10.tsx","type":"registry:block","content":"\"use client\"\n\nimport { useRef } from \"react\"\nimport { toast } from \"sonner\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { IconPlaceholder } from \"@/app/(create)/components/icon-placeholder\"\n\nfunction UploadToast({ progress }: { progress: number }) {\n  const done = progress >= 100\n\n  return (\n    <div className=\"bg-popover text-popover-foreground border-border rounded-md flex w-[350px] flex-col gap-3 border p-4 shadow-lg\">\n      <div className=\"flex items-center gap-3\">\n        <div className=\"bg-muted flex size-8 shrink-0 items-center justify-center\">\n          <IconPlaceholder\n            lucide=\"FileIcon\"\n            tabler=\"IconFile\"\n            hugeicons=\"FileEmpty02Icon\"\n            phosphor=\"FileIcon\"\n            remixicon=\"RiFileLine\"\n            className=\"size-4\"\n            aria-hidden=\"true\"\n          />\n        </div>\n        <div className=\"flex flex-1 flex-col\">\n          <p className=\"text-sm font-medium\">report-q4-2025.pdf</p>\n          <p className=\"text-muted-foreground text-xs\">\n            2.4 MB &middot; {done ? \"Complete\" : `Uploading... ${progress}%`}\n          </p>\n        </div>\n      </div>\n      <Progress\n        value={progress}\n        className=\"**:data-[slot=progress-indicator]:bg-success **:data-[slot=progress-track]:h-1.5\"\n      />\n    </div>\n  )\n}\n\nexport function Pattern() {\n  const intervalRef = useRef<ReturnType<typeof setInterval> | null>(null)\n\n  const showUploadToast = () => {\n    let progress = 0\n    const id = toast.custom(() => <UploadToast progress={progress} />, {\n      duration: Infinity,\n    })\n\n    intervalRef.current = setInterval(() => {\n      progress = Math.min(progress + Math.floor(Math.random() * 15) + 5, 100)\n\n      toast.custom(() => <UploadToast progress={progress} />, {\n        id,\n        duration: progress >= 100 ? 3000 : Infinity,\n      })\n\n      if (progress >= 100 && intervalRef.current) {\n        clearInterval(intervalRef.current)\n        intervalRef.current = null\n      }\n    }, 500)\n  }\n\n  return (\n    <div className=\"flex items-center justify-center\">\n      <Button onClick={showUploadToast} variant=\"outline\" className=\"w-fit\">\n        Upload Toast\n      </Button>\n    </div>\n  )\n}","target":"components/patterns/p-sonner-10.tsx"}]}