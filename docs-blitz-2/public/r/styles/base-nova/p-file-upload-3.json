{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-file-upload-3","type":"registry:block","title":"Basic drag and drop file upload","description":"Basic drag and drop file upload","dependencies":[],"registryDependencies":["https://reui.io/r/styles/base-nova/alert.json","button","https://reui.io/r/styles/base-nova/use-file-upload.json"],"files":[{"path":"p-file-upload-3.tsx","type":"registry:block","content":"\"use client\"\n\nimport {\n  formatBytes,\n  useFileUpload,\n  type FileMetadata,\n  type FileWithPreview,\n} from \"@/hooks/use-file-upload\"\nimport {\n  Alert,\n  AlertDescription,\n  AlertTitle,\n} from \"@/components/reui/alert\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { IconPlaceholder } from \"@/app/(create)/components/icon-placeholder\"\n\ninterface FileUploadCompactProps {\n  maxFiles?: number\n  maxSize?: number\n  accept?: string\n  multiple?: boolean\n  className?: string\n  onFilesChange?: (files: FileWithPreview[]) => void\n}\n\nexport function Pattern({\n  maxFiles = 3,\n  maxSize = 2 * 1024 * 1024, // 2MB\n  accept = \"image/*\",\n  multiple = true,\n  className,\n  onFilesChange,\n}: FileUploadCompactProps) {\n  const [\n    { files, isDragging, errors },\n    {\n      removeFile,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragOver,\n      handleDrop,\n      openFileDialog,\n      getInputProps,\n    },\n  ] = useFileUpload({\n    maxFiles,\n    maxSize,\n    accept,\n    multiple,\n    onFilesChange,\n  })\n\n  const isImage = (file: File | FileMetadata) => {\n    const type = file instanceof File ? file.type : file.type\n    return type.startsWith(\"image/\")\n  }\n\n  return (\n    <div className={cn(\"w-full max-w-lg\", className)}>\n      {/* Compact Upload Area */}\n      <div\n        className={cn(\n          \"border-border rounded-lg flex items-center gap-3 border border-dashed p-4 transition-colors\",\n          isDragging\n            ? \"border-primary bg-primary/5\"\n            : \"border-muted-foreground/25 hover:border-muted-foreground/50\"\n        )}\n        onDragEnter={handleDragEnter}\n        onDragLeave={handleDragLeave}\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n      >\n        <input {...getInputProps()} className=\"sr-only\" />\n\n        {/* Upload Button */}\n        <Button\n          onClick={openFileDialog}\n          size=\"sm\"\n          className={cn(isDragging && \"animate-bounce\")}\n        >\n          <IconPlaceholder\n            lucide=\"PlusIcon\"\n            tabler=\"IconPlus\"\n            hugeicons=\"PlusSignIcon\"\n            phosphor=\"PlusIcon\"\n            remixicon=\"RiAddLine\"\n            className=\"h-4 w-4\"\n          />\n          Add files\n        </Button>\n\n        {/* File Previews */}\n        <div className=\"flex flex-1 items-center gap-2\">\n          {files.length === 0 ? (\n            <p className=\"text-muted-foreground text-sm\">\n              Drop files here or click to browse (max {maxFiles} files)\n            </p>\n          ) : (\n            files.map((fileItem) => (\n              <div key={fileItem.id} className=\"group/item relative shrink-0\">\n                {isImage(fileItem.file) && fileItem.preview ? (\n                  <img\n                    src={fileItem.preview}\n                    alt={fileItem.file.name}\n                    className=\"h-12 w-12 rounded-lg border object-cover\"\n                    title={`${fileItem.file.name} (${formatBytes(fileItem.file.size)})`}\n                  />\n                ) : (\n                  <div\n                    className=\"bg-muted flex h-12 w-12 items-center justify-center rounded-lg border\"\n                    title={`${fileItem.file.name} (${formatBytes(fileItem.file.size)})`}\n                  >\n                    <IconPlaceholder\n                      lucide=\"FileIcon\"\n                      tabler=\"IconFile\"\n                      hugeicons=\"FileEmpty02Icon\"\n                      phosphor=\"FileIcon\"\n                      remixicon=\"RiFileLine\"\n                      className=\"text-muted-foreground h-5 w-5\"\n                    />\n                  </div>\n                )}\n\n                {/* Remove Button */}\n                <Button\n                  onClick={() => removeFile(fileItem.id)}\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"absolute -end-2 -top-2 size-5 rounded-full opacity-0 shadow-md transition-opacity group-hover/item:opacity-100\"\n                >\n                  <IconPlaceholder\n                    lucide=\"XIcon\"\n                    tabler=\"IconX\"\n                    hugeicons=\"MultiplicationSignIcon\"\n                    phosphor=\"XIcon\"\n                    remixicon=\"RiCloseLine\"\n                    className=\"size-3\"\n                  />\n                </Button>\n              </div>\n            ))\n          )}\n        </div>\n\n        {/* File Count */}\n        {files.length > 0 && (\n          <div className=\"text-muted-foreground shrink-0 text-xs\">\n            {files.length}/{maxFiles}\n          </div>\n        )}\n      </div>\n\n      {/* Error Messages */}\n      {errors.length > 0 && (\n        <Alert variant=\"destructive\" className=\"mt-5\">\n          <IconPlaceholder\n            lucide=\"CircleAlertIcon\"\n            tabler=\"IconAlertCircle\"\n            hugeicons=\"AlertCircleIcon\"\n            phosphor=\"WarningCircleIcon\"\n            remixicon=\"RiErrorWarningLine\"\n          />\n          <AlertTitle>File upload error(s)</AlertTitle>\n          <AlertDescription>\n            {errors.map((error, index) => (\n              <p key={index} className=\"last:mb-0\">\n                {error}\n              </p>\n            ))}\n          </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  )\n}","target":"components/patterns/p-file-upload-3.tsx"}]}