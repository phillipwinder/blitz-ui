{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-autocomplete-8","type":"registry:block","title":"With groups and labels","description":"With groups and labels","dependencies":["@base-ui/react"],"registryDependencies":["https://reui.io/r/styles/radix-vega/autocomplete.json","avatar"],"files":[{"path":"p-autocomplete-8.tsx","type":"registry:block","content":"\"use client\"\n\nimport { useMemo, useState } from \"react\"\nimport {\n  Autocomplete,\n  AutocompleteCollection,\n  AutocompleteContent,\n  AutocompleteEmpty,\n  AutocompleteGroup,\n  AutocompleteGroupLabel,\n  AutocompleteInput,\n  AutocompleteItem,\n  AutocompleteList,\n} from \"@/components/reui/autocomplete\"\nimport { Autocomplete as AutocompletePrimitive } from \"@base-ui/react/autocomplete\"\n\nimport {\n  Avatar,\n  AvatarFallback,\n  AvatarImage,\n} from \"@/components/ui/avatar\"\n\nexport function Pattern() {\n  const [value, setValue] = useState(\"\")\n  const [open, setOpen] = useState(false)\n\n  const { contains } = AutocompletePrimitive.useFilter({ sensitivity: \"base\" })\n\n  const filteredItems = useMemo(() => {\n    if (!value) return groupedUsers\n\n    return groupedUsers\n      .map((group) => ({\n        ...group,\n        items: (group.items || []).filter(\n          (item) =>\n            contains(item.name || \"\", value) ||\n            contains(item.group || \"\", value) ||\n            contains(item.position || \"\", value)\n        ),\n      }))\n      .filter((group) => group.items && group.items.length > 0)\n  }, [value, contains])\n\n  return (\n    <div className=\"w-full max-w-xs\">\n      <Autocomplete\n        items={filteredItems}\n        value={value}\n        onValueChange={setValue}\n        open={open}\n        onOpenChange={setOpen}\n        itemToStringValue={(item: unknown) => (item as User).name}\n        filter={null}\n      >\n        <AutocompleteInput placeholder=\"e.g. John, Developer, Marketing\" />\n        {open && (\n          <AutocompleteContent className=\"pt-0\">\n            {filteredItems.length === 0 ? (\n              <AutocompleteEmpty>No matching users found.</AutocompleteEmpty>\n            ) : (\n              <AutocompleteList className=\"not-empty:py-0\">\n                {(group: UserGroup) => (\n                  <AutocompleteGroup\n                    key={group.group}\n                    items={group.items}\n                    className=\"py-0\"\n                  >\n                    <AutocompleteGroupLabel className=\"bg-background text-muted-foreground sticky top-0 z-10 me-1.5 py-2.5 text-xs font-medium\">\n                      {group.group}\n                    </AutocompleteGroupLabel>\n                    <AutocompleteCollection>\n                      {(item: User) => (\n                        <AutocompleteItem\n                          key={item.id}\n                          value={item}\n                          className=\"flex items-center gap-2.5 rounded-lg\"\n                        >\n                          <Avatar className=\"size-9\">\n                            <AvatarImage\n                              src={item.avatar}\n                              alt={item.name || \"User\"}\n                            />\n                            <AvatarFallback>\n                              {(item.name || \"U\")\n                                .split(\" \")\n                                .map((n) => n[0])\n                                .join(\"\")}\n                            </AvatarFallback>\n                          </Avatar>\n                          <div className=\"min-w-0 flex-1\">\n                            <div className=\"truncate font-medium\">\n                              {item.name || \"Unknown\"}\n                            </div>\n                            <div className=\"text-muted-foreground truncate text-sm\">\n                              {item.position || \"No position available\"}\n                            </div>\n                          </div>\n                        </AutocompleteItem>\n                      )}\n                    </AutocompleteCollection>\n                  </AutocompleteGroup>\n                )}\n              </AutocompleteList>\n            )}\n          </AutocompleteContent>\n        )}\n      </Autocomplete>\n    </div>\n  )\n}\n\ninterface User {\n  id: string\n  name: string\n  group: string\n  position: string\n  avatar: string\n  status: \"Active\" | \"Inactive\" | \"Away\"\n}\n\ninterface UserGroup {\n  group: string\n  items: User[]\n}\n\nconst usersData: User[] = [\n  // Development Team\n  {\n    id: \"john-doe\",\n    name: \"John Doe\",\n    group: \"Development Team\",\n    position: \"Senior Frontend Developer\",\n    avatar: \"https://randomuser.me/api/portraits/men/1.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"jane-smith\",\n    name: \"Jane Smith\",\n    group: \"Development Team\",\n    position: \"Full Stack Developer\",\n    avatar: \"https://randomuser.me/api/portraits/women/2.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"mike-wilson\",\n    name: \"Mike Wilson\",\n    group: \"Development Team\",\n    position: \"Backend Developer\",\n    avatar: \"https://randomuser.me/api/portraits/men/3.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"sarah-johnson\",\n    name: \"Sarah Johnson\",\n    group: \"Development Team\",\n    position: \"DevOps Engineer\",\n    avatar: \"https://randomuser.me/api/portraits/women/4.jpg\",\n    status: \"Away\",\n  },\n  {\n    id: \"david-brown\",\n    name: \"David Brown\",\n    group: \"Development Team\",\n    position: \"Mobile Developer\",\n    avatar: \"https://randomuser.me/api/portraits/men/5.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"lisa-garcia\",\n    name: \"Lisa Garcia\",\n    group: \"Development Team\",\n    position: \"UI/UX Developer\",\n    avatar: \"https://randomuser.me/api/portraits/women/6.jpg\",\n    status: \"Active\",\n  },\n\n  // Design Team\n  {\n    id: \"alex-martinez\",\n    name: \"Alex Martinez\",\n    group: \"Design Team\",\n    position: \"Lead UX Designer\",\n    avatar: \"https://randomuser.me/api/portraits/men/7.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"emma-davis\",\n    name: \"Emma Davis\",\n    group: \"Design Team\",\n    position: \"UI Designer\",\n    avatar: \"https://randomuser.me/api/portraits/women/8.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"chris-taylor\",\n    name: \"Chris Taylor\",\n    group: \"Design Team\",\n    position: \"Product Designer\",\n    avatar: \"https://randomuser.me/api/portraits/men/9.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"olivia-anderson\",\n    name: \"Olivia Anderson\",\n    group: \"Design Team\",\n    position: \"Visual Designer\",\n    avatar: \"https://randomuser.me/api/portraits/women/10.jpg\",\n    status: \"Inactive\",\n  },\n\n  // Marketing Team\n  {\n    id: \"james-moore\",\n    name: \"James Moore\",\n    group: \"Marketing Team\",\n    position: \"Marketing Manager\",\n    avatar: \"https://randomuser.me/api/portraits/men/11.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"sophia-white\",\n    name: \"Sophia White\",\n    group: \"Marketing Team\",\n    position: \"Content Marketing Specialist\",\n    avatar: \"https://randomuser.me/api/portraits/women/12.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"william-harris\",\n    name: \"William Harris\",\n    group: \"Marketing Team\",\n    position: \"Digital Marketing Specialist\",\n    avatar: \"https://randomuser.me/api/portraits/men/13.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"ava-martin\",\n    name: \"Ava Martin\",\n    group: \"Marketing Team\",\n    position: \"Social Media Manager\",\n    avatar: \"https://randomuser.me/api/portraits/women/14.jpg\",\n    status: \"Away\",\n  },\n\n  // Sales Team\n  {\n    id: \"ethan-thompson\",\n    name: \"Ethan Thompson\",\n    group: \"Sales Team\",\n    position: \"Sales Director\",\n    avatar: \"https://randomuser.me/api/portraits/men/15.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"mia-garcia\",\n    name: \"Mia Garcia\",\n    group: \"Sales Team\",\n    position: \"Account Executive\",\n    avatar: \"https://randomuser.me/api/portraits/women/16.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"noah-martinez\",\n    name: \"Noah Martinez\",\n    group: \"Sales Team\",\n    position: \"Sales Representative\",\n    avatar: \"https://randomuser.me/api/portraits/men/17.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"isabella-rodriguez\",\n    name: \"Isabella Rodriguez\",\n    group: \"Sales Team\",\n    position: \"Business Development Manager\",\n    avatar: \"https://randomuser.me/api/portraits/women/18.jpg\",\n    status: \"Active\",\n  },\n\n  // Management Team\n  {\n    id: \"lucas-lee\",\n    name: \"Lucas Lee\",\n    group: \"Management Team\",\n    position: \"CEO\",\n    avatar: \"https://randomuser.me/api/portraits/men/19.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"charlotte-walker\",\n    name: \"Charlotte Walker\",\n    group: \"Management Team\",\n    position: \"CTO\",\n    avatar: \"https://randomuser.me/api/portraits/women/20.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"benjamin-hall\",\n    name: \"Benjamin Hall\",\n    group: \"Management Team\",\n    position: \"VP of Engineering\",\n    avatar: \"https://randomuser.me/api/portraits/men/21.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"amelia-allen\",\n    name: \"Amelia Allen\",\n    group: \"Management Team\",\n    position: \"VP of Marketing\",\n    avatar: \"https://randomuser.me/api/portraits/women/22.jpg\",\n    status: \"Active\",\n  },\n\n  // Support Team\n  {\n    id: \"henry-young\",\n    name: \"Henry Young\",\n    group: \"Support Team\",\n    position: \"Customer Success Manager\",\n    avatar: \"https://randomuser.me/api/portraits/men/23.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"grace-king\",\n    name: \"Grace King\",\n    group: \"Support Team\",\n    position: \"Technical Support Specialist\",\n    avatar: \"https://randomuser.me/api/portraits/women/24.jpg\",\n    status: \"Active\",\n  },\n  {\n    id: \"sebastian-wright\",\n    name: \"Sebastian Wright\",\n    group: \"Support Team\",\n    position: \"Customer Support Representative\",\n    avatar: \"https://randomuser.me/api/portraits/men/25.jpg\",\n    status: \"Away\",\n  },\n  {\n    id: \"lily-lopez\",\n    name: \"Lily Lopez\",\n    group: \"Support Team\",\n    position: \"Help Desk Technician\",\n    avatar: \"https://randomuser.me/api/portraits/women/26.jpg\",\n    status: \"Active\",\n  },\n]\n\nfunction groupUsers(users: User[]): UserGroup[] {\n  const groups: { [key: string]: User[] } = {}\n  users.forEach((item) => {\n    ;(groups[item.group] ??= []).push(item)\n  })\n\n  // Sort by status within each group (Active first, then Away, then Inactive)\n  Object.keys(groups).forEach((group) => {\n    groups[group].sort((a, b) => {\n      const statusOrder = { Active: 0, Away: 1, Inactive: 2 }\n      return statusOrder[a.status] - statusOrder[b.status]\n    })\n  })\n\n  const order = [\n    \"Management Team\",\n    \"Development Team\",\n    \"Design Team\",\n    \"Marketing Team\",\n    \"Sales Team\",\n    \"Support Team\",\n  ]\n  return order.map((group) => ({ group, items: groups[group] ?? [] }))\n}\n\nconst groupedUsers: UserGroup[] = groupUsers(usersData)","target":"components/patterns/p-autocomplete-8.tsx"}]}