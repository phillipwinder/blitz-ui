{"$schema":"https://ui.shadcn.com/schema/registry-item.json","name":"p-date-selector-4","type":"registry:block","title":"Date selector with dropdown menu","description":"Date selector with dropdown menu","dependencies":[],"registryDependencies":["button","https://reui.io/r/styles/radix-lyra/date-selector.json","dialog","dropdown-menu"],"files":[{"path":"p-date-selector-4.tsx","type":"registry:block","content":"\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport {\n  DateSelector,\n  DEFAULT_DATE_SELECTOR_I18N,\n  formatDateValue,\n  type DateSelectorI18nConfig,\n  type DateSelectorValue,\n} from \"@/components/reui/date-selector\"\n\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport { IconPlaceholder } from \"@/app/(create)/components/icon-placeholder\"\n\n// Helper function to create i18n config from translations\nfunction createI18nConfig(\n  translations: Partial<DateSelectorI18nConfig>\n): DateSelectorI18nConfig {\n  return { ...DEFAULT_DATE_SELECTOR_I18N, ...translations }\n}\n\n// Language-specific translations\nconst translations: Record<string, Partial<DateSelectorI18nConfig>> = {\n  es: {\n    selectDate: \"Seleccionar fecha\",\n    apply: \"Aplicar\",\n    cancel: \"Cancelar\",\n    clear: \"Limpiar\",\n    today: \"Hoy\",\n    filterTypes: {\n      is: \"es\",\n      before: \"antes de\",\n      after: \"despu√©s de\",\n      between: \"entre\",\n    },\n    periodTypes: {\n      day: \"D√≠a\",\n      month: \"Mes\",\n      quarter: \"Trimestre\",\n      halfYear: \"Semestre\",\n      year: \"A√±o\",\n    },\n    months: [\n      \"Enero\",\n      \"Febrero\",\n      \"Marzo\",\n      \"Abril\",\n      \"Mayo\",\n      \"Junio\",\n      \"Julio\",\n      \"Agosto\",\n      \"Septiembre\",\n      \"Octubre\",\n      \"Noviembre\",\n      \"Diciembre\",\n    ],\n    monthsShort: [\n      \"Ene\",\n      \"Feb\",\n      \"Mar\",\n      \"Abr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Ago\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dic\",\n    ],\n    quarters: [\"T1\", \"T2\", \"T3\", \"T4\"],\n    halfYears: [\"S1\", \"S2\"],\n    weekdays: [\n      \"Domingo\",\n      \"Lunes\",\n      \"Martes\",\n      \"Mi√©rcoles\",\n      \"Jueves\",\n      \"Viernes\",\n      \"S√°bado\",\n    ],\n    weekdaysShort: [\"Do\", \"Lu\", \"Ma\", \"Mi\", \"Ju\", \"Vi\", \"S√°\"],\n    placeholder: \"Seleccionar fecha...\",\n    rangePlaceholder: \"Seleccionar rango de fechas...\",\n  },\n  fr: {\n    selectDate: \"S√©lectionner une date\",\n    apply: \"Appliquer\",\n    cancel: \"Annuler\",\n    clear: \"Effacer\",\n    today: \"Aujourd'hui\",\n    filterTypes: {\n      is: \"est\",\n      before: \"avant\",\n      after: \"apr√®s\",\n      between: \"entre\",\n    },\n    periodTypes: {\n      day: \"Jour\",\n      month: \"Mois\",\n      quarter: \"Trimestre\",\n      halfYear: \"Semestre\",\n      year: \"Ann√©e\",\n    },\n    months: [\n      \"Janvier\",\n      \"F√©vrier\",\n      \"Mars\",\n      \"Avril\",\n      \"Mai\",\n      \"Juin\",\n      \"Juillet\",\n      \"Ao√ªt\",\n      \"Septembre\",\n      \"Octobre\",\n      \"Novembre\",\n      \"D√©cembre\",\n    ],\n    monthsShort: [\n      \"Jan\",\n      \"F√©v\",\n      \"Mar\",\n      \"Avr\",\n      \"Mai\",\n      \"Juin\",\n      \"Juil\",\n      \"Ao√ª\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"D√©c\",\n    ],\n    quarters: [\"T1\", \"T2\", \"T3\", \"T4\"],\n    halfYears: [\"S1\", \"S2\"],\n    weekdays: [\n      \"Dimanche\",\n      \"Lundi\",\n      \"Mardi\",\n      \"Mercredi\",\n      \"Jeudi\",\n      \"Vendredi\",\n      \"Samedi\",\n    ],\n    weekdaysShort: [\"Di\", \"Lu\", \"Ma\", \"Me\", \"Je\", \"Ve\", \"Sa\"],\n    placeholder: \"S√©lectionner une date...\",\n    rangePlaceholder: \"S√©lectionner une plage de dates...\",\n  },\n  de: {\n    selectDate: \"Datum ausw√§hlen\",\n    apply: \"Anwenden\",\n    cancel: \"Abbrechen\",\n    clear: \"L√∂schen\",\n    today: \"Heute\",\n    filterTypes: {\n      is: \"ist\",\n      before: \"vor\",\n      after: \"nach\",\n      between: \"zwischen\",\n    },\n    periodTypes: {\n      day: \"Tag\",\n      month: \"Monat\",\n      quarter: \"Quartal\",\n      halfYear: \"Halbjahr\",\n      year: \"Jahr\",\n    },\n    months: [\n      \"Januar\",\n      \"Februar\",\n      \"M√§rz\",\n      \"April\",\n      \"Mai\",\n      \"Juni\",\n      \"Juli\",\n      \"August\",\n      \"September\",\n      \"Oktober\",\n      \"November\",\n      \"Dezember\",\n    ],\n    monthsShort: [\n      \"Jan\",\n      \"Feb\",\n      \"M√§r\",\n      \"Apr\",\n      \"Mai\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Okt\",\n      \"Nov\",\n      \"Dez\",\n    ],\n    quarters: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n    halfYears: [\"H1\", \"H2\"],\n    weekdays: [\n      \"Sonntag\",\n      \"Montag\",\n      \"Dienstag\",\n      \"Mittwoch\",\n      \"Donnerstag\",\n      \"Freitag\",\n      \"Samstag\",\n    ],\n    weekdaysShort: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"],\n    placeholder: \"Datum ausw√§hlen...\",\n    rangePlaceholder: \"Datumsbereich ausw√§hlen...\",\n  },\n}\n\n// Internationalization configurations\nconst i18nConfigs: Record<string, DateSelectorI18nConfig> = {\n  en: DEFAULT_DATE_SELECTOR_I18N,\n  es: createI18nConfig(translations.es),\n  fr: createI18nConfig(translations.fr),\n  de: createI18nConfig(translations.de),\n}\n\n// Language metadata\nconst languageMetadata = {\n  en: {\n    label: \"English\",\n    flag: \"üá∫üá∏\",\n    dateFormat: \"MM/dd/yyyy\",\n    weekStartsOn: 0 as const,\n    ui: {\n      label: \"Due date\",\n      hint: \"Try: 2025, Q4, 05/10/2025\",\n      placeholder: \"Select a date\",\n    },\n  },\n  es: {\n    label: \"Espa√±ol\",\n    flag: \"üá™üá∏\",\n    dateFormat: \"dd/MM/yyyy\",\n    weekStartsOn: 1 as const,\n    ui: {\n      label: \"Fecha de vencimiento\",\n      hint: \"Prueba: 2025, T4, 05/10/2025\",\n      placeholder: \"Seleccionar una fecha\",\n    },\n  },\n  fr: {\n    label: \"Fran√ßais\",\n    flag: \"üá´üá∑\",\n    dateFormat: \"dd/MM/yyyy\",\n    weekStartsOn: 1 as const,\n    ui: {\n      label: \"Date d'√©ch√©ance\",\n      hint: \"Essayez: 2025, T4, 05/10/2025\",\n      placeholder: \"S√©lectionner une date\",\n    },\n  },\n  de: {\n    label: \"Deutsch\",\n    flag: \"üá©üá™\",\n    dateFormat: \"dd.MM.yyyy\",\n    weekStartsOn: 1 as const,\n    ui: {\n      label: \"F√§lligkeitsdatum\",\n      hint: \"Versuchen Sie: 2025, Q4, 05.10.2025\",\n      placeholder: \"Datum ausw√§hlen\",\n    },\n  },\n}\n\n// Language options for the selector\nconst languageOptions = Object.entries(languageMetadata).map(\n  ([value, meta]) => ({\n    value,\n    label: meta.label,\n    flag: meta.flag,\n  })\n)\n\nexport function Pattern() {\n  const [value, setValue] = useState<DateSelectorValue | undefined>()\n  const [open, setOpen] = useState(false)\n  const [internalValue, setInternalValue] = useState<\n    DateSelectorValue | undefined\n  >(value)\n  const [currentLanguage, setCurrentLanguage] =\n    useState<keyof typeof languageMetadata>(\"fr\")\n\n  // Get current language metadata and i18n config\n  const currentMeta = useMemo(\n    () => languageMetadata[currentLanguage] || languageMetadata.en,\n    [currentLanguage]\n  )\n\n  const currentI18n = useMemo(\n    () => i18nConfigs[currentLanguage] || i18nConfigs.en,\n    [currentLanguage]\n  )\n\n  useEffect(() => {\n    if (open) {\n      setInternalValue(value)\n    }\n  }, [open, value])\n\n  const formattedValue = useMemo(\n    () =>\n      value ? formatDateValue(value, currentI18n, currentMeta.dateFormat) : \"\",\n    [value, currentI18n, currentMeta.dateFormat]\n  )\n\n  const displayText = formattedValue || currentMeta.ui.placeholder\n\n  const handleApply = () => {\n    setValue(internalValue)\n    setOpen(false)\n  }\n\n  const handleCancel = () => {\n    setInternalValue(value)\n    setOpen(false)\n  }\n\n  return (\n    <div className=\"flex h-full w-full grow flex-col items-stretch gap-4\">\n      <div className=\"flex w-full justify-end\">\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"flex items-center gap-2\"\n            >\n              <span>{currentMeta.flag}</span>\n              <span>{currentMeta.label}</span>\n              <IconPlaceholder\n                lucide=\"ChevronDownIcon\"\n                tabler=\"IconChevronDown\"\n                hugeicons=\"ArrowDown01Icon\"\n                phosphor=\"CaretDownIcon\"\n                remixicon=\"RiArrowDownSLine\"\n              />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"start\">\n            {languageOptions.map((lang) => (\n              <DropdownMenuItem\n                key={lang.value}\n                onClick={() =>\n                  setCurrentLanguage(\n                    lang.value as keyof typeof languageMetadata\n                  )\n                }\n                className=\"flex items-center gap-2\"\n              >\n                <span>{lang.flag}</span>\n                <span>{lang.label}</span>\n              </DropdownMenuItem>\n            ))}\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n      <div className=\"flex grow items-center justify-center\">\n        <Dialog open={open} onOpenChange={setOpen}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" className=\"w-56 justify-start\">\n              <IconPlaceholder\n                lucide=\"CalendarIcon\"\n                tabler=\"IconCalendarEvent\"\n                hugeicons=\"Calendar04Icon\"\n                phosphor=\"CalendarBlankIcon\"\n                remixicon=\"RiCalendarLine\"\n              />\n              {displayText}\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"sm:max-w-lg\" showCloseButton={false}>\n            <DialogHeader>\n              <DialogTitle>{currentMeta.ui.label}</DialogTitle>\n            </DialogHeader>\n            <DateSelector\n              value={internalValue}\n              onChange={setInternalValue}\n              showInput={true}\n              i18n={currentI18n}\n              dayDateFormat={currentMeta.dateFormat}\n              weekStartsOn={currentMeta.weekStartsOn}\n            />\n            <DialogFooter>\n              <DialogClose asChild>\n                <Button variant=\"outline\" onClick={handleCancel}>\n                  {currentI18n.cancel}\n                </Button>\n              </DialogClose>\n              <Button onClick={handleApply}>{currentI18n.apply}</Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </div>\n  )\n}","target":"components/patterns/p-date-selector-4.tsx"}]}